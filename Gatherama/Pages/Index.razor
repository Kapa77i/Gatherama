@page "/"
@inject LoginState loginstate
@inject NavigationManager navigationManager

<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators" style="margin:15px;">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="@firstSlideCss"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1" class="@secondSlideCss"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2" class="@thirdSlideCss"></li>
    </ol>
    <div class="carousel-inner">
        <div class="carousel-item @firstSlideCss">
            <img class="d-block w-10">
        </div>
        <div class="carousel-item @secondSlideCss">
            <img class="d-block w-100">
        </div>
        <div class="carousel-item @thirdSlideCss">
            <img class="d-block w-100">
        </div>
    </div>
    <a class="carousel-control-prev" href="" role="button" data-slide="prev" @onclick="()=>Manually(true)">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="" role="button" data-slide="next" @onclick="()=>Manually(false)">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<!--Main Navigation-->
<!--Main layout-->

@if (loginstate.hasLoggedin)
{

<main class="mt-5">
    <div class="container">
        <!--Section: Content-->
        <section>
            <div class="row">
                <div class="col-md-6 gx-5 mb-4">
                    <div class="bg-image hover-overlay ripple shadow-2-strong rounded-5" data-mdb-ripple-color="light">
                        <img src="/Images_Index/shroomsandberries15-2.jpg" class="img-fluid" />
                        <a href="#!">
                            <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                        </a>
                    </div>
                </div>

                <div class="col-md-6 gx-5 mb-4">
                    <h4><strong>Gatherama is your app for Berries and Mushrooms</strong></h4>
                    <p>
                        Gatherama is an app designed to help you save the locations of your favorite gathering spots. This app is design
                        with gathereres in forefront and the usability of the app is very important - as are the actual gathering spots!
                            You can find  yours and your friends <a href="/ownspots"> own Gathering Spots here!</a>
                    </p>
                    <p>
                        <strong>
                            Share your finds with your friends!
                        </strong>
                    </p>
                    <p>
                        With this app you cannot only keep record of your favoprite gathering spots, but you can also
                        share them with your friends! Remember to add your friends to your friendlist from <a href="/personlist">Friends & Users page!</a>
                    </p>
                </div>
            </div>
        </section>
        <!--Section: Content-->

        <hr class="my-5" />

        <!--Section: Content-->
        <section class="text-center">
            <h4 class="mb-5"><strong>What Can You Do with Gatherama?</strong></h4>

            <div class="row">
                <div class="col-lg-4 col-md-12 mb-4">
                    <div class="card">
                        <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                            <img src="/Images_Index/shroomsandberries7.jpg" class="img-fluid" />
                            <a href="#!">
                                <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                            </a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Mushrooms and Berries</h5>
                            <p class="card-text">
                                The stars of this app are your mushrooms and berries. You can add any species in your spots,
                                keep track of them and see all of them in one place. 
                            </p>
                                 <a href="/addspot" class="btn btn-primary">Go and add your first finding here!</a> 
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card">
                        <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                            <img src="/Images_Index/shroomsandberries16.jpg"
                                 class="img-fluid" />
                            <a href="#!">
                                <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                            </a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Add Your Favorite Spots</h5>
                            <p class="card-text">
                                With this app you can easily add, update or remove your favorite gathering spots.
                            </p>
                                <a href="/ownspots" class="btn btn-primary">Check your Spots!</a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card">
                        <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                            <img src="/Images_Index/rasberry_1.jpg"
                                 class="img-fluid" />
                            <a href="#!">
                                <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                            </a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Track Your Locations</h5>
                            <p class="card-text">
                                With this app you will have a pinpoint location of your gathering spots, so you will
                                find them easily in furute! You can also update your spot, if it moves, etc.
                            </p>
                                <a href="/addspot" class="btn btn-primary">Go and add your first finding here!</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--Section: Content-->

    </div>
    </main>
}
else
{

    <main class="mt-5">
        <div class="container">
            <!--Section: Content-->
            <section>
                <div class="row">
                    <div class="col-md-6 gx-5 mb-4">
                        <div class="bg-image hover-overlay ripple shadow-2-strong rounded-5" data-mdb-ripple-color="light">
                            <img src="/Images_Index/shroomsandberries15-2.jpg" class="img-fluid" />
                            <a href="#!">
                                <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                            </a>
                        </div>
                    </div>

                    <div class="col-md-6 gx-5 mb-4">
                        <h4><strong>Gatherama is your app for Berries and Mushrooms</strong></h4>
                        <p>
                            Gatherama is an app designed to help you save the locations of your favorite gathering spots. This app is design
                            with gathereres in forefront and the usability of the app is very important - as are the actual gathering spots!
                            You can find your own Gathering Spots via designated page in the app.
                        </p>
                        <p>
                            <strong>
                                Share your finds with your friends!
                            </strong>
                        </p>
                        <p>
                            With this app you cannot only keep record of your favoprite gathering spots, but you can also
                            share them with your friends! Remember to add your friends to your friendlist from Friends & Users page!
                        </p>
                    </div>
                </div>
            </section>
            <!--Section: Content-->

            <hr class="my-5" />

            <!--Section: Content-->
            <section class="text-center">
                <h4 class="mb-5"><strong>What Can You Do with Gatherama?</strong></h4>

                <div class="row">
                    <div class="col-lg-4 col-md-12 mb-4">
                        <div class="card">
                            <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                                <img src="/Images_Index/shroomsandberries7.jpg" class="img-fluid" />
                                <a href="#!">
                                    <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                                </a>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">Mushrooms and Berries</h5>
                                <p class="card-text">
                                    The stars of this app are your mushrooms and berries. You can add any species in your spots,
                                    keep track of them and see all of them in one place.
                                </p>
                                @* <a href="#!" class="btn btn-primary">Button</a> *@
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card">
                            <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                                <img src="/Images_Index/shroomsandberries16.jpg"
                                     class="img-fluid" />
                                <a href="#!">
                                    <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                                </a>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">Add Your Favorite Spots</h5>
                                <p class="card-text">
                                    With this app you can easily add, update or remove your favorite gathering spots.
                                </p>
                                @*  <a href="#!" class="btn btn-primary">Button</a> *@
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card">
                            <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                                <img src="/Images_Index/rasberry_1.jpg"
                                     class="img-fluid" />
                                <a href="#!">
                                    <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                                </a>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">Track Your Locations</h5>
                                <p class="card-text">
                                    With this app you will have a pinpoint location of your gathering spots, so you will
                                    find them easily in furute! You can also update your spot, if it moves, etc.
                                </p>
                                @*  <a href="#!" class="btn btn-primary">Button</a> *@
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--Section: Content-->

        </div>
    </main>
}
<!--Main layout-->
<!--Footer-->
<footer >

    <hr class="m-0" />

    <div class="text-center py-4 align-items-center">
        <p>Come join us on the exciting world of Mushrooms and Berries!</p>
        © 2023 Copyright: Savonia Tite 23 Group 2
    </div>

</footer>
<!--Footer-->


@code{
     private string imageSource = $"Gatherama_wbg.png";

    string firstSlideCss = "active";
    string secondSlideCss = "";
    string thirdSlideCss = "";

    int currentPosition = 0;
    int currentSlide = 0;

    CancellationTokenSource cts;
    CancellationToken ct;

    protected override async Task OnInitializedAsync()
    {
        cts = new CancellationTokenSource();
        ct = cts.Token;
        await Walkthrough(ct);
    }

    public async Task Walkthrough(CancellationToken ct)
    {
        while (!ct.IsCancellationRequested)
        {
            await Task.Delay(4000, ct);
            currentPosition++;
            ChangeSlide();
            await InvokeAsync(() => this.StateHasChanged());
        }
    }

    public void Manually(bool backwards)
    {
        cts.Cancel();

        if (backwards)
            currentPosition--;
        else
            currentPosition++;

        ChangeSlide();
    }

    // Koodia sliden vaihtamiseen 
    private void ChangeSlide()
    {
        currentSlide = Math.Abs(currentPosition % 3);

        switch (currentSlide)
        {
            case 0:
                firstSlideCss = "active";
                secondSlideCss = "";
                thirdSlideCss = "";
                break;
            case 1:
                firstSlideCss = "";
                secondSlideCss = "active";
                thirdSlideCss = "";
                break;
            case 2:
                firstSlideCss = "";
                secondSlideCss = "";
                thirdSlideCss = "active";
                break;
            default:
                break;
        }
    }

}